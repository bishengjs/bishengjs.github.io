/*
Copyright 2013, KISSY v1.41
MIT Licensed
build time: Dec 4 22:16
*/
KISSY.add("json/quote",[],function(o){var h={"":"\\b","":"\\f","\n":"\\n","\r":"\\r","\t":"\\t",'"':'\\"'},j={},k=/["\b\f\n\r\t\x00-\x1f]/g,m=/\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;o.each(h,function(f,b){j[b]=f});j["\\/"]="/";return{quote:function(f){return'"'+f.replace(k,function(b){var a;if(!(a=h[b]))a="\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4);return a})+'"'},unQuote:function(f){return f.slice(1,f.length-1).replace(m,function(b){var a;if(!(a=j[b]))a=String.fromCharCode(parseInt(b.slice(2),
16));return a})}}});
KISSY.add("json/stringify",["./quote"],function(o,h){function j(f){return 10>f?"0"+f:f}function k(f,b,a,c,e,s,g){var d=b[f];if(d&&"object"===typeof d)if("function"===typeof d.toJSON)d=d.toJSON(f);else if(d instanceof Date)d=isFinite(d.valueOf())?d.getUTCFullYear()+"-"+j(d.getUTCMonth()+1)+"-"+j(d.getUTCDate())+"T"+j(d.getUTCHours())+":"+j(d.getUTCMinutes())+":"+j(d.getUTCSeconds())+"Z":null;else if(d instanceof String||d instanceof Number||d instanceof Boolean)d=d.valueOf();void 0!==a&&(d=a.call(b,
f,d));switch(typeof d){case "number":return isFinite(d)?""+d:"null";case "string":return m.quote(d);case "boolean":return""+d;case "object":if(d)if(o.isArray(d)){for(var f=d,b=g,g=g+e,d=[],h=f.length,p=0;p<h;){var l=k(""+p,f,a,c,e,s,g);d[d.length]=void 0===l?"null":l;++p}d.length?e?(a=d.join("\n,"+g),a="[\n"+g+a+"\n"+b+"]"):a="["+d.join(",")+"]":a="[]"}else{for(var f=d,b=g,g=g+e,i,d=void 0!==c?c:o.keys(f),l=[],p=0,h=d.length;p<h;p++){i=d[p];var t=k(i,f,a,c,e,s,g);void 0!==t&&(i=m.quote(i),i+=":",
e&&(i+=" "),i+=t,l[l.length]=i)}l.length?e?(a=l.join(",\n"+g),a="{\n"+g+a+"\n"+b+"}"):a="{"+l.join(",")+"}":a="{}"}else a="null";return a}}var m=h("./quote");return function(f,b,a){var c="",e,h;b&&("function"===typeof b?h=b:o.isArray(b)&&(e=b));"number"===typeof a?(a=Math.min(10,a),c=Array(a+1).join(" ")):"string"===typeof a&&(c=a.slice(0,10));return k("",{"":f},h,e,c,[],"")}});
KISSY.add("json/parser",[],function(o,h){var j={},k=KISSY,m=function(b){this.rules=[];k.mix(this,b);this.resetInput(this.input)};m.prototype={constructor:function(b){this.rules=[];k.mix(this,b);this.resetInput(this.input)},resetInput:function(b){k.mix(this,{input:b,matched:"",stateStack:[m.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var b=this.stateStack[this.stateStack.length-1],a=[],b=this.mapState(b);k.each(this.rules,
function(c){var e=c.state||c[3];e?k.inArray(b,e)&&a.push(c):b==m.STATIC.INITIAL&&a.push(c)});return a},pushState:function(b){this.stateStack.push(b)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var b=m.STATIC.DEBUG_CONTEXT_LIMIT,a=this.matched,c=this.match,e=this.input,a=a.slice(0,a.length-c.length),a=(a.length>b?"...":"")+a.slice(-b).replace(/\n/," "),c=c+e,c=c.slice(0,b)+(c.length>b?"...":"");return a+c+"\n"+Array(a.length+
1).join("-")+"^"},mapSymbol:function(b){var a=this.symbolMap;return!a?b:a[b]||(a[b]=++this.symbolId)},mapReverseSymbol:function(b){var a=this.symbolMap,c,e=this.reverseSymbolMap;if(!e&&a)for(c in e=this.reverseSymbolMap={},a)e[a[c]]=c;return e?e[b]:b},mapState:function(b){var a=this.stateMap;return!a?b:a[b]||(a[b]=++this.stateId)},lex:function(){var b=this.input,a,c,e,f=this.getCurrentRules();this.match=this.text="";if(!b)return this.mapSymbol(m.STATIC.END_TAG);for(a=0;a<f.length;a++){c=f[a];var g=
c.token||c[0];e=c.action||c[2]||h;if(c=b.match(c.regexp||c[1])){if(a=c[0].match(/\n.*/g))this.lineNumber+=a.length;k.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:a?a[a.length-1].length-1:this.lastColumn+c[0].length});a=this.match=c[0];this.matches=c;this.text=a;this.matched+=a;e=e&&e.call(this);e=e===h?g:this.mapSymbol(e);this.input=b=b.slice(a.length);return e?e:this.lex()}}"lex error at line "+this.lineNumber+":\n"+this.showDebugInfo();return h}};
m.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};var f=new m({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});j.lexer=f;f.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,
json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20};j.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return"true"===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){this.$1[this.$1.length]=this.$3;return this.$1}],
[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var b={};b[this.$1.key]=this.$1.value;return b}],[20,[20,3,19],function(){this.$1[this.$3.key]=this.$3.value;return this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]];j.table={gotos:{"0":{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},
action:{"0":{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,
10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,
0],8:[2,14,0]}}};j.parse=function(b){var a=this,c=a.lexer,e,f,g,d=a.table,j=d.gotos,d=d.action,m=a.productions,l=[null],i=[0];for(c.resetInput(b);;){e=i[i.length-1];f||(f=c.lex());if(!f)return"it is not a valid input: "+b,"error",!1;g=d[e]&&d[e][f];if(!g){var o=[];d[e]&&k.each(d[e],function(b,c){o.push(a.lexer.mapReverseSymbol(c))});b="Syntax error at line "+c.lineNumber+":\n"+c.showDebugInfo()+"\nexpect "+o.join(", ");b;return!1}switch(g[0]){case 1:i.push(f);l.push(c.text);i.push(g[2]);f=null;break;
case 2:var n=m[g[1]];e=n.symbol||n[0];g=n.action||n[2];var q=(n.rhs||n[1]).length,r=0,n=l[l.length-q];a.$$=n;for(n=h;r<q;r++)a["$"+(q-r)]=l[l.length-1-r];g&&(n=g.call(a));n=n!==h?n:a.$$;q&&(i=i.slice(0,-2*q),l=l.slice(0,-1*q));i.push(e);l.push(n);i.push(j[i[i.length-2]][i[i.length-1]]);break;case 0:return n}}return h};return j});
KISSY.add("json/parse",["./parser","./quote"],function(o,h){function j(f,b,a){var c=f[b],e,h,g;if("object"===typeof c)if(o.isArray(c)){e=0;h=c.length;for(var d=[];e<h;)g=j(c,""+e,a),void 0!==g&&(d[d.length]=g);c=d}else{d=o.keys(c);e=0;for(h=d.length;e<h;e++){var k=d[e];g=j(c,k,a);void 0===g?delete c[k]:c[k]=g}}return a.call(f,b,c)}var k=h("./parser"),m=h("./quote");k.yy={unQuote:m.unQuote};return function(f,b){var a=k.parse(""+f);return b?j({"":a},"",b):a}});
KISSY.add("json",["./json/stringify","./json/parse"],function(o,h){var j=h("./json/stringify"),k=h("./json/parse");return o.JSON={stringify:j,parse:k}});
